services:
  velociraptor:
    image: ubuntu:24.04
    container_name: velociraptor
    restart: unless-stopped
    volumes:
      - ./velociraptor:/opt/velociraptor/velociraptor:ro
      - ./server.config.yaml:/opt/velociraptor/server.config.yaml:ro
      - ./data:/opt/velociraptor/data
    ports:
      - "8889:8889"   # GUI
      - "8000:8000"   # Client frontend
      - "8001:8001"   # gRPC API
    entrypoint:
      - /opt/velociraptor/velociraptor
      - frontend
      - -v
      - --config
      - /opt/velociraptor/server.config.yaml
    mem_limit: 2g
    logging:
      driver: json-file
      options:
        max-size: "10m"
        max-file: "3"
